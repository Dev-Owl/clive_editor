/* ================================================================== */
/*  CliveEdit — Editor Content Styles                                  */
/* ================================================================== */

/* ---- Shell ---- */
.ce-editor-wrap {
  position: relative;
  border: 1px solid var(--ce-border);
  border-radius: var(--ce-radius);
  background: var(--ce-bg);
  overflow: hidden;
  font-family: var(--ce-font-family);
  font-size: var(--ce-font-size);
  line-height: var(--ce-line-height);
  color: var(--ce-text);
}

/* ---- WYSIWYG area ---- */
.ce-wysiwyg-wrap {
  position: relative;
}

.ce-wysiwyg {
  min-height: 200px;
  padding: var(--ce-content-padding);
  outline: none;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
}

.ce-wysiwyg:focus {
  box-shadow: inset 0 0 0 2px var(--ce-focus-ring);
}

.ce-wysiwyg::selection,
.ce-wysiwyg *::selection {
  background: var(--ce-selection-bg);
}

/* Placeholder (via :empty + data-attribute) */
.ce-wysiwyg:empty::before {
  content: attr(data-placeholder);
  color: var(--ce-placeholder-color);
  pointer-events: none;
}

/* ---- Markdown textarea ---- */
.ce-markdown {
  display: block;
  width: 100%;
  min-height: 200px;
  padding: var(--ce-content-padding);
  border: none;
  outline: none;
  resize: vertical;
  background: var(--ce-bg);
  color: var(--ce-text);
  font-family: var(--ce-mono-font);
  font-size: 14px;
  line-height: 1.6;
  tab-size: 2;
  box-sizing: border-box;
}

.ce-markdown:focus {
  box-shadow: inset 0 0 0 2px var(--ce-focus-ring);
}

/* ================================================================== */
/*  Content element styling inside WYSIWYG                             */
/* ================================================================== */

.ce-wysiwyg h1 {
  font-size: var(--ce-h1-font-size);
  font-weight: var(--ce-h1-font-weight);
  margin: var(--ce-h1-margin);
  line-height: var(--ce-h1-line-height);
}

.ce-wysiwyg h2 {
  font-size: var(--ce-h2-font-size);
  font-weight: var(--ce-h2-font-weight);
  margin: var(--ce-h2-margin);
  line-height: var(--ce-h2-line-height);
}

.ce-wysiwyg h3 {
  font-size: var(--ce-h3-font-size);
  font-weight: var(--ce-h3-font-weight);
  margin: var(--ce-h3-margin);
  line-height: var(--ce-h3-line-height);
}

.ce-wysiwyg p {
  margin: 0;
}

.ce-wysiwyg strong {
  font-weight: 700;
}

.ce-wysiwyg em {
  font-style: italic;
}

.ce-wysiwyg s,
.ce-wysiwyg del {
  text-decoration: line-through;
}

.ce-wysiwyg a {
  color: var(--ce-link-color);
  text-decoration: underline;
  cursor: text;
}

/* Ctrl / Cmd held → show pointer on links */
.ce-wysiwyg.ce-links-clickable a {
  cursor: pointer;
  text-decoration-style: dotted;
}

.ce-wysiwyg code {
  font-family: var(--ce-mono-font);
  background: var(--ce-code-bg);
  color: var(--ce-code-text);
  padding: var(--ce-code-padding);
  border-radius: var(--ce-code-radius);
  font-size: var(--ce-code-font-size);
}

.ce-wysiwyg pre {
  background: var(--ce-code-bg);
  border-radius: var(--ce-pre-radius);
  padding: var(--ce-pre-padding);
  overflow-x: auto;
  margin: var(--ce-content-margin);
  position: relative;
}

.ce-wysiwyg pre code {
  background: transparent;
  color: var(--ce-text);
  padding: 0;
  border-radius: 0;
  font-size: var(--ce-code-font-size);
}

/* Override Shiki's inline styles on <pre> so our CSS variables control the look */
.ce-wysiwyg pre[style] {
  background: var(--ce-code-bg) !important;
}

/* ---- Language label (inside <pre>) ---- */

.ce-wysiwyg .ce-code-lang,
.ce-viewer__content .ce-code-lang {
  position: absolute;
  top: 4px;
  right: 6px;
  background: var(--ce-code-lang-bg);
  color: var(--ce-code-lang-text);
  font-family: var(--ce-font-family);
  font-size: var(--ce-code-lang-font-size);
  padding: 2px 8px;
  border-radius: 4px;
  cursor: pointer;
  user-select: none;
  line-height: 1.4;
  z-index: 1;
}

.ce-wysiwyg .ce-code-lang:hover {
  background: rgba(0, 0, 0, 0.1);
}

/* ---- Inline language input ---- */

.ce-wysiwyg .ce-code-lang-input {
  position: absolute;
  top: 4px;
  right: 6px;
  background: var(--ce-bg);
  color: var(--ce-text);
  font-family: var(--ce-font-family);
  font-size: var(--ce-code-lang-font-size);
  padding: 2px 8px;
  border: 1px solid var(--ce-border);
  border-radius: 4px;
  outline: none;
  width: 100px;
  line-height: 1.4;
  z-index: 2;
}

.ce-wysiwyg blockquote {
  border-left: var(--ce-blockquote-border-width) solid var(--ce-blockquote-border);
  margin: var(--ce-content-margin);
  padding: var(--ce-blockquote-padding);
  color: var(--ce-text);
  opacity: var(--ce-blockquote-opacity);
}

.ce-wysiwyg ul,
.ce-wysiwyg ol {
  padding-left: var(--ce-list-padding-left);
  margin: 0;
}

.ce-wysiwyg li {
  margin: 0;
}

.ce-wysiwyg li>p {
  margin: 0;
}

.ce-wysiwyg hr {
  border: none;
  border-top: var(--ce-hr-border-width) solid var(--ce-hr-color);
  margin: var(--ce-hr-margin);
}

.ce-wysiwyg img {
  max-width: 100%;
  height: auto;
  border-radius: var(--ce-img-radius);
}

/* ---- Tables ---- */
.ce-wysiwyg table {
  border-collapse: collapse;
  width: 100%;
  margin: var(--ce-content-margin);
}

.ce-wysiwyg th,
.ce-wysiwyg td {
  border: 1px solid var(--ce-border);
  padding: var(--ce-table-cell-padding);
  text-align: left;
}

.ce-wysiwyg th {
  background: var(--ce-toolbar-bg);
  font-weight: 600;
}

.ce-wysiwyg tr:nth-child(even) td {
  background: color-mix(in srgb, var(--ce-bg), var(--ce-border) 10%);
}

/* ---- Table Controls (floating bar) ---- */
.ce-table-controls {
  position: absolute;
  z-index: 10;
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 3px 6px;
  background: var(--ce-toolbar-bg);
  border: 1px solid var(--ce-toolbar-border);
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  white-space: nowrap;
  user-select: none;
}

.ce-table-controls__group {
  display: flex;
  align-items: center;
  gap: 2px;
}

.ce-table-controls__label {
  font-size: 11px;
  font-weight: 600;
  color: var(--ce-text);
  opacity: 0.55;
  padding: 0 4px 0 2px;
  line-height: 1;
}

.ce-table-controls__btn {
  display: inline-flex;
  align-items: center;
  gap: 0;
  padding: 3px 4px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--ce-text);
  cursor: pointer;
  line-height: 1;
}

.ce-table-controls__btn:hover:not(:disabled) {
  background: var(--ce-toolbar-btn-hover);
}

.ce-table-controls__btn:active:not(:disabled) {
  background: var(--ce-toolbar-btn-active);
}

.ce-table-controls__btn:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

.ce-table-controls__btn--danger:hover:not(:disabled) {
  background: #fee2e2;
  color: #dc2626;
}

.ce-table-controls__divider {
  width: 1px;
  height: 18px;
  background: var(--ce-toolbar-border);
  margin: 0 4px;
}

/* ================================================================== */
/*  MarkdownViewer — Read-only renderer                                */
/* ================================================================== */

.ce-viewer {
  font-family: var(--ce-font-family);
  font-size: var(--ce-font-size);
  line-height: var(--ce-line-height);
  color: var(--ce-text);
  background: var(--ce-bg);
}

.ce-viewer--bordered {
  border: 1px solid var(--ce-border);
  border-radius: var(--ce-radius);
}

.ce-viewer__content {
  padding: var(--ce-content-padding);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Re-use the same content element styles as the WYSIWYG area */
.ce-viewer__content h1 {
  font-size: var(--ce-h1-font-size);
  font-weight: var(--ce-h1-font-weight);
  margin: var(--ce-h1-margin);
  line-height: var(--ce-h1-line-height);
}

.ce-viewer__content h2 {
  font-size: var(--ce-h2-font-size);
  font-weight: var(--ce-h2-font-weight);
  margin: var(--ce-h2-margin);
  line-height: var(--ce-h2-line-height);
}

.ce-viewer__content h3 {
  font-size: var(--ce-h3-font-size);
  font-weight: var(--ce-h3-font-weight);
  margin: var(--ce-h3-margin);
  line-height: var(--ce-h3-line-height);
}

.ce-viewer__content p {
  margin: 0;
}

.ce-viewer__content strong {
  font-weight: 700;
}

.ce-viewer__content em {
  font-style: italic;
}

.ce-viewer__content s,
.ce-viewer__content del {
  text-decoration: line-through;
}

.ce-viewer__content a {
  color: var(--ce-link-color);
  text-decoration: underline;
}

.ce-viewer__content a:hover {
  opacity: 0.8;
}

.ce-viewer__content code {
  font-family: var(--ce-mono-font);
  background: var(--ce-code-bg);
  color: var(--ce-code-text);
  padding: var(--ce-code-padding);
  border-radius: var(--ce-code-radius);
  font-size: var(--ce-code-font-size);
}

.ce-viewer__content pre {
  background: var(--ce-code-bg);
  border-radius: var(--ce-pre-radius);
  padding: var(--ce-pre-padding);
  overflow-x: auto;
  margin: var(--ce-content-margin);
  position: relative;
}

.ce-viewer__content pre code {
  background: transparent;
  color: var(--ce-text);
  padding: 0;
  border-radius: 0;
  font-size: var(--ce-code-font-size);
}

/* Override Shiki's inline styles on <pre> so our CSS variables control the look */
.ce-viewer__content pre[style] {
  background: var(--ce-code-bg) !important;
}

.ce-viewer__content blockquote {
  border-left: var(--ce-blockquote-border-width) solid var(--ce-blockquote-border);
  margin: var(--ce-content-margin);
  padding: var(--ce-blockquote-padding);
  color: var(--ce-text);
  opacity: var(--ce-blockquote-opacity);
}

.ce-viewer__content ul,
.ce-viewer__content ol {
  padding-left: var(--ce-list-padding-left);
  margin: 0;
}

.ce-viewer__content li {
  margin: 0;
}

.ce-viewer__content li>p {
  margin: 0;
}

.ce-viewer__content hr {
  border: none;
  border-top: var(--ce-hr-border-width) solid var(--ce-hr-color);
  margin: var(--ce-hr-margin);
}

.ce-viewer__content img {
  max-width: 100%;
  height: auto;
  border-radius: var(--ce-img-radius);
}

.ce-viewer__content table {
  border-collapse: collapse;
  width: 100%;
  margin: var(--ce-content-margin);
}

.ce-viewer__content th,
.ce-viewer__content td {
  border: 1px solid var(--ce-border);
  padding: var(--ce-table-cell-padding);
  text-align: left;
}

.ce-viewer__content th {
  background: var(--ce-toolbar-bg);
  font-weight: 600;
}

.ce-viewer__content tr:nth-child(even) td {
  background: color-mix(in srgb, var(--ce-bg), var(--ce-border) 10%);
}